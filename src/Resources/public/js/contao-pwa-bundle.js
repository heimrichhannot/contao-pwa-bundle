!function(){var t={9662:function(t,e,n){var o=n(614),r=n(6330),i=TypeError;t.exports=function(t){if(o(t))return t;throw i(r(t)+" is not a function")}},9670:function(t,e,n){var o=n(111),r=String,i=TypeError;t.exports=function(t){if(o(t))return t;throw i(r(t)+" is not an object")}},1318:function(t,e,n){var o=n(5656),r=n(1400),i=n(6244),s=function(t){return function(e,n,s){var u,c=o(e),a=i(c),f=r(s,a);if(t&&n!=n){for(;a>f;)if((u=c[f++])!=u)return!0}else for(;a>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},206:function(t,e,n){var o=n(1702);t.exports=o([].slice)},4326:function(t,e,n){var o=n(1702),r=o({}.toString),i=o("".slice);t.exports=function(t){return i(r(t),8,-1)}},9920:function(t,e,n){var o=n(2597),r=n(3887),i=n(1236),s=n(3070);t.exports=function(t,e,n){for(var u=r(e),c=s.f,a=i.f,f=0;f<u.length;f++){var p=u[f];o(t,p)||n&&o(n,p)||c(t,p,a(e,p))}}},8880:function(t,e,n){var o=n(9781),r=n(3070),i=n(9114);t.exports=o?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){var o=n(6339),r=n(3070);t.exports=function(t,e,n){return n.get&&o(n.get,e,{getter:!0}),n.set&&o(n.set,e,{setter:!0}),r.f(t,e,n)}},8052:function(t,e,n){var o=n(614),r=n(3070),i=n(6339),s=n(3072);t.exports=function(t,e,n,u){u||(u={});var c=u.enumerable,a=void 0!==u.name?u.name:e;if(o(n)&&i(n,a,u),u.global)c?t[e]=n:s(e,n);else{try{u.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},3072:function(t,e,n){var o=n(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(o,t,{value:e,configurable:!0,writable:!0})}catch(n){o[t]=e}return e}},9781:function(t,e,n){var o=n(7293);t.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var o=n(7854),r=n(111),i=o.document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},9363:function(t){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},6833:function(t,e,n){var o=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},5268:function(t,e,n){var o=n(4326);t.exports="undefined"!=typeof process&&"process"==o(process)},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var o,r,i=n(7854),s=n(8113),u=i.process,c=i.Deno,a=u&&u.versions||c&&c.version,f=a&&a.v8;f&&(r=(o=f.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(r=+o[1]),t.exports=r},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var o=n(7854),r=n(1236).f,i=n(8880),s=n(8052),u=n(3072),c=n(9920),a=n(4705);t.exports=function(t,e){var n,f,p,l,h,d=t.target,b=t.global,v=t.stat;if(n=b?o:v?o[d]||u(d,{}):(o[d]||{}).prototype)for(f in e){if(l=e[f],p=t.dontCallGetSet?(h=r(n,f))&&h.value:n[f],!a(b?f:d+(v?".":"#")+f,t.forced)&&void 0!==p){if(typeof l==typeof p)continue;c(l,p)}(t.sham||p&&p.sham)&&i(l,"sham",!0),s(n,f,l,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},2104:function(t,e,n){var o=n(4374),r=Function.prototype,i=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(o?s.bind(i):function(){return s.apply(i,arguments)})},9974:function(t,e,n){var o=n(1470),r=n(9662),i=n(4374),s=o(o.bind);t.exports=function(t,e){return r(t),void 0===e?t:i?s(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var o=n(7293);t.exports=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var o=n(4374),r=Function.prototype.call;t.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(t,e,n){var o=n(9781),r=n(2597),i=Function.prototype,s=o&&Object.getOwnPropertyDescriptor,u=r(i,"name"),c=u&&"something"===function(){}.name,a=u&&(!o||o&&s(i,"name").configurable);t.exports={EXISTS:u,PROPER:c,CONFIGURABLE:a}},1470:function(t,e,n){var o=n(4326),r=n(1702);t.exports=function(t){if("Function"===o(t))return r(t)}},1702:function(t,e,n){var o=n(4374),r=Function.prototype,i=r.call,s=o&&r.bind.bind(i,i);t.exports=o?s:function(t){return function(){return i.apply(t,arguments)}}},5005:function(t,e,n){var o=n(7854),r=n(614);t.exports=function(t,e){return arguments.length<2?(n=o[t],r(n)?n:void 0):o[t]&&o[t][e];var n}},8173:function(t,e,n){var o=n(9662),r=n(8554);t.exports=function(t,e){var n=t[e];return r(n)?void 0:o(n)}},7854:function(t,e,n){var o=function(t){return t&&t.Math==Math&&t};t.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var o=n(1702),r=n(7908),i=o({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(r(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var o=n(5005);t.exports=o("document","documentElement")},4664:function(t,e,n){var o=n(9781),r=n(7293),i=n(317);t.exports=!o&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var o=n(1702),r=n(7293),i=n(4326),s=Object,u=o("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):s(t)}:s},2788:function(t,e,n){var o=n(1702),r=n(614),i=n(5465),s=o(Function.toString);r(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var o,r,i,s=n(4811),u=n(7854),c=n(111),a=n(8880),f=n(2597),p=n(5465),l=n(6200),h=n(3501),d="Object already initialized",b=u.TypeError,v=u.WeakMap;if(s||p.state){var g=p.state||(p.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,o=function(t,e){if(g.has(t))throw b(d);return e.facade=t,g.set(t,e),e},r=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var m=l("state");h[m]=!0,o=function(t,e){if(f(t,m))throw b(d);return e.facade=t,a(t,m,e),e},r=function(t){return f(t,m)?t[m]:{}},i=function(t){return f(t,m)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw b("Incompatible receiver, "+t+" required");return n}}}},614:function(t,e,n){var o=n(4154),r=o.all;t.exports=o.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4705:function(t,e,n){var o=n(7293),r=n(614),i=/#|\.prototype\./,s=function(t,e){var n=c[u(t)];return n==f||n!=a&&(r(e)?o(e):!!e)},u=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},a=s.NATIVE="N",f=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,n){var o=n(614),r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:o(t)||t===i}:function(t){return"object"==typeof t?null!==t:o(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var o=n(5005),r=n(614),i=n(7976),s=n(3307),u=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return r(e)&&i(e.prototype,u(t))}},6244:function(t,e,n){var o=n(7466);t.exports=function(t){return o(t.length)}},6339:function(t,e,n){var o=n(1702),r=n(7293),i=n(614),s=n(2597),u=n(9781),c=n(6530).CONFIGURABLE,a=n(2788),f=n(9909),p=f.enforce,l=f.get,h=String,d=Object.defineProperty,b=o("".slice),v=o("".replace),g=o([].join),m=u&&!r((function(){return 8!==d((function(){}),"length",{value:8}).length})),y=String(String).split("String"),S=t.exports=function(t,e,n){"Symbol("===b(h(e),0,7)&&(e="["+v(h(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(u?d(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?u&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var o=p(t);return s(o,"source")||(o.source=g(y,"string"==typeof e?e:"")),t};Function.prototype.toString=S((function(){return i(this)&&l(this).source||a(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var o=+t;return(o>0?n:e)(o)}},3070:function(t,e,n){var o=n(9781),r=n(4664),i=n(3353),s=n(9670),u=n(4948),c=TypeError,a=Object.defineProperty,f=Object.getOwnPropertyDescriptor,p="enumerable",l="configurable",h="writable";e.f=o?i?function(t,e,n){if(s(t),e=u(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&h in n&&!n[h]){var o=f(t,e);o&&o[h]&&(t[e]=n.value,n={configurable:l in n?n[l]:o[l],enumerable:p in n?n[p]:o[p],writable:!1})}return a(t,e,n)}:a:function(t,e,n){if(s(t),e=u(e),s(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var o=n(9781),r=n(6916),i=n(5296),s=n(9114),u=n(5656),c=n(4948),a=n(2597),f=n(4664),p=Object.getOwnPropertyDescriptor;e.f=o?p:function(t,e){if(t=u(t),e=c(e),f)try{return p(t,e)}catch(t){}if(a(t,e))return s(!r(i.f,t,e),t[e])}},8006:function(t,e,n){var o=n(6324),r=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},7976:function(t,e,n){var o=n(1702);t.exports=o({}.isPrototypeOf)},6324:function(t,e,n){var o=n(1702),r=n(2597),i=n(5656),s=n(1318).indexOf,u=n(3501),c=o([].push);t.exports=function(t,e){var n,o=i(t),a=0,f=[];for(n in o)!r(u,n)&&r(o,n)&&c(f,n);for(;e.length>a;)r(o,n=e[a++])&&(~s(f,n)||c(f,n));return f}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);e.f=r?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},2140:function(t,e,n){var o=n(6916),r=n(614),i=n(111),s=TypeError;t.exports=function(t,e){var n,u;if("string"===e&&r(n=t.toString)&&!i(u=o(n,t)))return u;if(r(n=t.valueOf)&&!i(u=o(n,t)))return u;if("string"!==e&&r(n=t.toString)&&!i(u=o(n,t)))return u;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var o=n(5005),r=n(1702),i=n(8006),s=n(5181),u=n(9670),c=r([].concat);t.exports=o("Reflect","ownKeys")||function(t){var e=i.f(u(t)),n=s.f;return n?c(e,n(t)):e}},7066:function(t,e,n){"use strict";var o=n(9670);t.exports=function(){var t=o(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4488:function(t,e,n){var o=n(8554),r=TypeError;t.exports=function(t){if(o(t))throw r("Can't call method on "+t);return t}},7152:function(t,e,n){"use strict";var o,r=n(7854),i=n(2104),s=n(614),u=n(9363),c=n(8113),a=n(206),f=n(8053),p=r.Function,l=/MSIE .\./.test(c)||u&&((o=r.Bun.version.split(".")).length<3||0==o[0]&&(o[1]<3||3==o[1]&&0==o[2]));t.exports=function(t,e){var n=e?2:1;return l?function(o,r){var u=f(arguments.length,1)>n,c=s(o)?o:p(o),l=u?a(arguments,n):[],h=u?function(){i(c,this,l)}:c;return e?t(h,r):t(h)}:t}},6200:function(t,e,n){var o=n(2309),r=n(9711),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},5465:function(t,e,n){var o=n(7854),r=n(3072),i="__core-js_shared__",s=o[i]||r(i,{});t.exports=s},2309:function(t,e,n){var o=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:o?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var o=n(7392),r=n(7293),i=n(7854).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},261:function(t,e,n){var o,r,i,s,u=n(7854),c=n(2104),a=n(9974),f=n(614),p=n(2597),l=n(7293),h=n(490),d=n(206),b=n(317),v=n(8053),g=n(6833),m=n(5268),y=u.setImmediate,S=u.clearImmediate,w=u.process,x=u.Dispatch,_=u.Function,P=u.MessageChannel,E=u.String,L=0,O={},I="onreadystatechange";l((function(){o=u.location}));var j=function(t){if(p(O,t)){var e=O[t];delete O[t],e()}},k=function(t){return function(){j(t)}},C=function(t){j(t.data)},B=function(t){u.postMessage(E(t),o.protocol+"//"+o.host)};y&&S||(y=function(t){v(arguments.length,1);var e=f(t)?t:_(t),n=d(arguments,1);return O[++L]=function(){c(e,void 0,n)},r(L),L},S=function(t){delete O[t]},m?r=function(t){w.nextTick(k(t))}:x&&x.now?r=function(t){x.now(k(t))}:P&&!g?(s=(i=new P).port2,i.port1.onmessage=C,r=a(s.postMessage,s)):u.addEventListener&&f(u.postMessage)&&!u.importScripts&&o&&"file:"!==o.protocol&&!l(B)?(r=B,u.addEventListener("message",C,!1)):r=I in b("script")?function(t){h.appendChild(b("script"))[I]=function(){h.removeChild(this),j(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:y,clear:S}},1400:function(t,e,n){var o=n(9303),r=Math.max,i=Math.min;t.exports=function(t,e){var n=o(t);return n<0?r(n+e,0):i(n,e)}},5656:function(t,e,n){var o=n(8361),r=n(4488);t.exports=function(t){return o(r(t))}},9303:function(t,e,n){var o=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:o(e)}},7466:function(t,e,n){var o=n(9303),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},7908:function(t,e,n){var o=n(4488),r=Object;t.exports=function(t){return r(o(t))}},7593:function(t,e,n){var o=n(6916),r=n(111),i=n(2190),s=n(8173),u=n(2140),c=n(5112),a=TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!r(t)||i(t))return t;var n,c=s(t,f);if(c){if(void 0===e&&(e="default"),n=o(c,t,e),!r(n)||i(n))return n;throw a("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},4948:function(t,e,n){var o=n(7593),r=n(2190);t.exports=function(t){var e=o(t,"string");return r(e)?e:e+""}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:function(t,e,n){var o=n(1702),r=0,i=Math.random(),s=o(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+i,36)}},3307:function(t,e,n){var o=n(6293);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var o=n(9781),r=n(7293);t.exports=o&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:function(t,e,n){var o=n(7854),r=n(614),i=o.WeakMap;t.exports=r(i)&&/native code/.test(String(i))},5112:function(t,e,n){var o=n(7854),r=n(2309),i=n(2597),s=n(9711),u=n(6293),c=n(3307),a=o.Symbol,f=r("wks"),p=c?a.for||a:a&&a.withoutSetter||s;t.exports=function(t){return i(f,t)||(f[t]=u&&i(a,t)?a[t]:p("Symbol."+t)),f[t]}},2087:function(t,e,n){var o=n(7854),r=n(9781),i=n(7045),s=n(7066),u=n(7293),c=o.RegExp,a=c.prototype;r&&u((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},n="",o=t?"dgimsy":"gimsy",r=function(t,o){Object.defineProperty(e,t,{get:function(){return n+=o,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(i.hasIndices="d"),i)r(s,i[s]);return Object.getOwnPropertyDescriptor(a,"flags").get.call(e)!==o||n!==o}))&&i(a,"flags",{configurable:!0,get:s})},1091:function(t,e,n){var o=n(2109),r=n(7854),i=n(261).clear;o({global:!0,bind:!0,enumerable:!0,forced:r.clearImmediate!==i},{clearImmediate:i})},4633:function(t,e,n){n(1091),n(2986)},2986:function(t,e,n){var o=n(2109),r=n(7854),i=n(261).set,s=n(7152),u=r.setImmediate?s(i,!1):i;o({global:!0,bind:!0,enumerable:!0,forced:r.setImmediate!==u},{setImmediate:u})}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";n(2087),n(4633);var t=class{constructor(){this.buttons=[],this.debug=!1,this.isInit=!1,this.subscriptionAction="",document.addEventListener("huh_pwa_push_isSubscribed",this.setUnsubscribe.bind(this)),document.addEventListener("huh_pwa_push_isUnsubscribed",this.setSubscribe.bind(this)),document.addEventListener("huh_pwa_push_permission_denied",this.setBlocked.bind(this)),document.addEventListener("huh_pwa_sw_not_supported",this.setNotSupported.bind(this))}onLoaded(){this.isInit||this.init()}init(){this.collectElementsToUpdate(),this.isInit=!0}collectElementsToUpdate(){this.buttons=document.querySelectorAll(".huhPwaWebSubscription"),this.buttons.forEach((t=>{t.addEventListener("click",(()=>{this.changeSubscriptionStatus(t)}))}))}beforeEvent(t){this.debug&&console.log("[Push Notification Buttons] "+t),this.isInit||this.init()}setSubscribe(t){this.beforeEvent('Update Buttons to "Subscribe"'),this.subscriptionAction="subscribe",this.buttons.forEach((t=>{t.disabled=!1,t.querySelector(".label").innerHTML=HuhContaoPwaBundle.translations.pushnotifications.subscribe,t.classList.add("unsubscribed"),t.classList.remove("subscribed"),t.classList.remove("blocked")}))}setUnsubscribe(t){this.beforeEvent('Update Buttons to "Unsubscribe"'),this.subscriptionAction="unsubscribe",this.buttons.forEach((t=>{t.disabled=!1,t.querySelector(".label").innerHTML=HuhContaoPwaBundle.translations.pushnotifications.unsubscribe,t.classList.add("subscribed"),t.classList.remove("unsubscribed"),t.classList.remove("blocked")}))}setBlocked(t){this.beforeEvent("Update Buttons to blocked"),this.buttons.forEach((function(t){t.querySelector(".label").innerHTML=HuhContaoPwaBundle.translations.pushnotifications.blocked,t.classList.add("blocked"),t.classList.remove("unsubscribed"),t.classList.remove("subscribed"),t.disabled=!0}))}setNotSupported(t){this.beforeEvent("Serviceworker not supported"),this.buttons.forEach((function(t){t.querySelector(".label").innerHTML=HuhContaoPwaBundle.translations.pushnotifications.not_supported,t.classList.add("blocked"),t.classList.remove("unsubscribed"),t.classList.remove("subscribed"),t.disabled=!0}))}changeSubscriptionStatus(t){this.debug&&console.log("Fire huh_pwa_push_changeSubscriptionState event"),t.disabled=!0,document.dispatchEvent(new CustomEvent("huh_pwa_push_changeSubscriptionState",{detail:this.subscriptionAction}))}};class e{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.isInit=!1,this.debug=!1,this.subscribePath=t,this.unsubscribePath=e}onLoaded(){this.isInit||(document.addEventListener("huh_pwa_push_changeSubscriptionState",this.changeSubscriptionStatus.bind(this)),this.isInit=!0)}subscribe(){this.debug&&console.log("[Push Notification Subscription] Trying to Subscribe"),navigator.serviceWorker.ready.then((t=>{fetch("./api/notifications/publickey").then((t=>t.text())).then((n=>t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e.urlBase64ToUint8Array(n)}))).then((t=>(this.debug&&console.log("[Push Notification Subscription] Successful Subscribed",t.endpoint),fetch(this.subscribePath,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:t})})))).then((()=>{this.setIsSubscribed()})).catch((t=>{document.dispatchEvent(new CustomEvent("huh_pwa_push_subscription_failed",{detail:{reason:t}}))}))}))}unsubscribe(){this.debug&&console.log("[Push Notification Subscription] Trying to unsubscribe"),navigator.serviceWorker.ready.then((t=>t.pushManager.getSubscription())).then((t=>t.unsubscribe().then((()=>(this.debug&&console.log("[Push Notification Subscription] Successful Unsubscribed",t.endpoint),fetch(this.unsubscribePath,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:t})})))))).then((()=>{this.setIsUnsubscribed()})).catch((t=>{document.dispatchEvent(new CustomEvent("huh_pwa_push_unsubscription_failed",{detail:{reason:t}}))}))}setIsUnsubscribed(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.checkPermission()&&(document.dispatchEvent(new CustomEvent("huh_pwa_push_isUnsubscribed",{detail:{context:t}})),this.debug&&console.log("[Push Notification Subscription] Fired huh_pwa_push_isUnsubscribed"))}setIsSubscribed(){this.checkPermission()&&(document.dispatchEvent(new Event("huh_pwa_push_isSubscribed")),this.debug&&console.log('[Push Notification Subscription] Fired huh_pwa_push_isSubscribed"'))}checkPermission(){return"denied"!==Notification.permission||(document.dispatchEvent(new Event("huh_pwa_push_permission_denied")),this.debug&&console.log("[Push Notification Subscription] Fired huh_pwa_push_permission_denied"),!1)}changeSubscriptionStatus(t){this.debug&&console.log("[Push Notification Subscription] CHANGE Subscription state"),this.checkPermission()&&("subscribe"===t.detail?this.subscribe():"unsubscribe"===t.detail&&this.unsubscribe())}static urlBase64ToUint8Array(t){let e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),o=new Uint8Array(n.length);for(var r=0;r<n.length;++r)o[r]=n.charCodeAt(r);return o}}var o=e;var r=class{registerListener(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.debug=t,window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.deferredPrompt=e,t&&console.log("[PWA Install] beforeinstallprompt event fired"),this.getInstallButtons().forEach((t=>{t.classList.remove("disabled")}))})),this.getInstallButtons().forEach((t=>{t.addEventListener("click",(t=>{this.fireInstallPrompt()}))}))}getInstallButtons(){return document.querySelectorAll(".huh-pwa-install-button")}fireInstallPrompt(){void 0!==this.deferredPrompt&&(this.deferredPrompt.prompt(),debug&&console.log("[PWA Install] dispatch beforeinstallprompt event"))}};let i=new t,s=new o(HuhContaoPwaBundle.pushNotifications.subscribePath,HuhContaoPwaBundle.pushNotifications.unsubscribePath),u=HuhContaoPwaBundle.debug;window.addEventListener("load",(function(){"serviceWorker"in navigator?(u&&console.log("[SW Registration] Register service worker"),navigator.serviceWorker.register(HuhContaoPwaBundle.serviceWorker.path,{scope:HuhContaoPwaBundle.serviceWorker.scope}).then((function(t){t.addEventListener("updatefound",(function(){u&&console.log("[SW Registration] New service worker found for scope "+t.scope)})),function(){u&&console.log("[SW Registration] Initialize Push");if(!HuhContaoPwaBundle.pushNotifications.support)return void(u&&console.log("[SW Registration] Push notifications not activated"));s.checkPermission(),"PushManager"in window||(document.dispatchEvent(new Event("huh_pwa_push_not_supported")),u&&console.log("[SW Registration] Browser don't support push. Hide subscription button."));navigator.serviceWorker.ready.then((function(t){u&&console.log("[SW Registration] Got service worker registration"),t.pushManager.getSubscription().then((function(t){t?(u&&console.log("[SW Registration] Already subscribed"),s.setIsSubscribed()):(u&&console.log("[SW Registration] Not subscribed"),s.setIsUnsubscribed("init"))}))}))}()}))):(u&&console.log("[SW Registration] Service Worker not supported"),document.dispatchEvent(new CustomEvent("huh_pwa_sw_not_supported")))})),document.addEventListener("DOMContentLoaded",(function(){if(s.onLoaded(),i.onLoaded(),HuhContaoPwaBundle.hideInstallPrompt){new r(u).registerListener()}}))}()}();