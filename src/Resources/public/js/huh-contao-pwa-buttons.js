"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var HuhContaoPwaButtons=/*#__PURE__*/function(){function a(){_classCallCheck(this,a),this.buttons=[],this.debug=!1,this.isInit=!1,this.subscriptionAction="",document.addEventListener("huh_pwa_push_isSubscribed",this.setUnsubscribe.bind(this)),document.addEventListener("huh_pwa_push_isUnsubscribed",this.setSubscribe.bind(this)),document.addEventListener("huh_pwa_push_permission_denied",this.setBlocked.bind(this))}return _createClass(a,[{key:"onReady",value:function a(){this.isInit||this.init()}},{key:"init",value:function a(){this.collectElementsToUpdate(),this.isInit=!0}},{key:"collectElementsToUpdate",value:function b(){var a=this;this.buttons=document.querySelectorAll(".huhPwaWebSubscription"),this.buttons.forEach(function(b){b.addEventListener("click",function(){a.changeSubscriptionStatus(b)})})}},{key:"beforeEvent",value:function b(a){this.debug&&console.log("[Push Notification Buttons] "+a),this.isInit||this.init()}},{key:"setSubscribe",value:function a(){this.beforeEvent("Update Buttons to \"Subscribe\""),this.subscriptionAction="subscribe",this.buttons.forEach(function(a){a.disabled=!1,a.querySelector(".label").textContent=HuhPwaTranslator.pushnotifications.subscribe,a.classList.add("unsubscribed"),a.classList.remove("subscribed"),a.classList.remove("blocked")})}},{key:"setUnsubscribe",value:function a(){this.beforeEvent("Update Buttons to \"Unsubscribe\""),this.subscriptionAction="unsubscribe",this.buttons.forEach(function(a){a.disabled=!1,a.querySelector(".label").textContent=HuhPwaTranslator.pushnotifications.unsubscribe,a.classList.add("subscribed"),a.classList.remove("unsubscribed"),a.classList.remove("blocked")})}},{key:"setBlocked",value:function a(){this.beforeEvent("Update Buttons to blocked"),this.buttons.forEach(function(a){a.querySelector(".label").textContent=HuhPwaTranslator.pushnotifications.blocked,a.classList.add("blocked"),a.classList.remove("unsubscribed"),a.classList.remove("subscribed"),a.disabled=!0})}},{key:"changeSubscriptionStatus",value:function b(a){console.log("Fire huh_pwa_push_changeSubscriptionState event"),a.disabled=!0,document.dispatchEvent(new CustomEvent("huh_pwa_push_changeSubscriptionState",{detail:this.subscriptionAction}))}}]),a}();exports=HuhContaoPwaButtons;