{% extends "@HeimrichHannotContaoPwa/serviceworker/pwa_serviceworker_offlinecopy.js.twig" %}

{% block preload_files %}
    fetch('/build/manifest.json').then(function(responce) {
        return responce.json();
    }).then(function(json) {
        SW.log(event, 'Fetch webpack manifest')
        // Create an array with only file paths
        let encoreFiles = Object.keys(json).map(function(key) {
            return json[key];
        });
        files.concat(encoreFiles);
    });
{% endblock %}